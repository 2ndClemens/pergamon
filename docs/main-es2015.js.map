{"version":3,"sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/components/Player.js","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/components/controls/controls.component.ts","./src/app/components/instanced-object/instanced-object.component.ts","./src/app/components/stage/stage.component.ts","./src/app/data/controls.ts","./src/app/data/entities.ts","./src/app/services/camera-position.service.ts","./src/app/services/control-state.service.ts","./src/app/services/entity.service.ts","./src/app/services/sky.service.ts","./src/app/shader/instanced-shader.ts","./src/environments/environment.ts","./src/main.ts","./src/app/app.component.scss","./src/app/components/controls/controls.component.scss","./src/app/components/instanced-object/instanced-object.component.scss","./src/app/components/stage/stage.component.scss","./src/app/app.component.html","./src/app/components/controls/controls.component.html","./src/app/components/instanced-object/instanced-object.component.html","./src/app/components/stage/stage.component.html"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,0C;;;;;;;;;;;;;;;;ACZA;AACA;AACA;;AAEyD;;AAEzD,0BAA0B,yCAAO;AACjC,wBAAwB,yCAAO;;AAE/B,qBAAqB,8CAAY;;AAEjC;;AAEA;;AAEA;AACA;;AAEA,kBAAkB,4CAAU;AAC5B;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,oCAAoC;;AAEpC;;AAEA;;;AAGkB;;;;;;;;;;;;;;;;;;;;ACvDuB;AACc;AAGvD,MAAM,MAAM,GAAW,EAAE,CAAC;IAMb,gBAAgB,SAAhB,gBAAgB;CAAI;AAApB,gBAAgB;IAJ5B,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,iEAAoB,CAAC,MAAM,EAAE,EAAE,sBAAsB,EAAE,QAAQ,EAAE,CAAC,CAAC;QAC7E,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,gBAAgB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACVa;IAO7B,YAAY,SAAZ,YAAY;;QACvB,UAAK,GAAG,UAAU,CAAC;IACrB,CAAC;CAAA;AAFY,YAAY;IALxB,wDAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,6EAAmC;;KAEpC,CAAC;GACW,YAAY,CAExB;AAFwB;;;;;;;;;;;;;;;;;;;;;;;;;ACPiC;AACjB;AAEe;AACT;AACqB;AACgC;AACvB;IAgBhE,SAAS,SAAT,SAAS;CAAI;AAAb,SAAS;IAdrB,uDAAQ,CAAC;QACR,YAAY,EAAE;YACZ,wDAAY;YACZ,6EAAc;YACd,6GAAwB;YACxB,sFAAiB;SAClB;QACD,OAAO,EAAE;YACP,oEAAa;YACb,iEAAgB;SACjB;QACD,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,CAAC,wDAAY,CAAC;KAC1B,CAAC;GACW,SAAS,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;ACvBmE;AAEZ;IAShE,iBAAiB,SAAjB,iBAAiB;IAkG5B,YAAmB,mBAAwC;QAAxC,wBAAmB,GAAnB,mBAAmB,CAAqB;IAAI,CAAC;IA9FhE,WAAW,CAAC,EAAc;QACxB,EAAE,CAAC,cAAc,EAAE,CAAC;QACpB,oCAAoC;QACpC,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QACtE,yCAAyC;QACzC,0BAA0B;IAC5B,CAAC;IAGD,WAAW,CAAC,EAAc;QACxB,EAAE,CAAC,cAAc,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QACtE,yCAAyC;IAC3C,CAAC;IAGD,SAAS,CAAC,EAAc;QACtB,EAAE,CAAC,cAAc,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,KAAK,CAAC;IACxC,CAAC;IAGD,aAAa,CAAC,EAAc;QAC1B,uBAAuB;QACvB,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QAChF,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;IACnF,CAAC;IAGD,aAAa,CAAC,EAAc;QAC1B,uBAAuB;QACvB,mBAAmB;QACnB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QAChF,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QACjF,yCAAyC;IAC3C,CAAC;IAGD,UAAU,CAAC,EAAc;QACvB,uBAAuB;QACvB,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,KAAK,CAAC;IACxC,CAAC;IAGD,SAAS,CAAC,EAAiB;QACzB,mDAAmD;QACnD,QAAQ,EAAE,CAAC,OAAO,EAAE;YAClB,KAAK,EAAE,CAAC,CAAC,MAAM;YACf,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;gBACjC,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,QAAQ;YACjB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,IAAI,CAAC;gBACnC,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,QAAQ;YACjB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC;gBAC9B,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,SAAS;YAClB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;gBAC/B,MAAM;SACT;IACH,CAAC;IAGD,OAAO,CAAC,EAAiB;QACvB,oDAAoD;QACpD,QAAQ,EAAE,CAAC,OAAO,EAAE;YAClB,KAAK,EAAE,CAAC,CAAC,MAAM;YACf,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;gBAClC,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,QAAQ;YACjB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,KAAK,CAAC;gBACpC,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,QAAQ;YACjB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,KAAK,CAAC;gBAC/B,MAAM;YACR,KAAK,EAAE,CAAC,CAAC,SAAS;YAClB,KAAK,EAAE,EAAE,KAAK;gBACZ,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;gBAChC,MAAM;SACT;IACH,CAAC;IAKD,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,CAAC;IACjE,CAAC;CAEF;;YAjHQ,uFAAmB;;;0BAYzB,uDAAY,SAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;0BAW7C,uDAAY,SAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;wBAQ7C,uDAAY,SAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;4BAM3C,uDAAY,SAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC;4BAQ9C,uDAAY,SAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;yBAS7C,uDAAY,SAAC,mBAAmB,EAAE,CAAC,QAAQ,CAAC;wBAM5C,uDAAY,SAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;sBAuB3C,uDAAY,SAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;;AA1E/B,iBAAiB;IAP7B,wDAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,kFAAwC;QAExC,eAAe,EAAE,yEAA8B;;KAEhD,CAAC;GACW,iBAAiB,CAwG7B;AAxG6B;;;;;;;;;;;;;;;;;;;;;;;;;;;ACX+D;AAC9D;AAEuC;AACa;AACN;IAUhE,wBAAwB,SAAxB,wBAAwB;IAiBnC;QARS,WAAM,GAAG,IAAI,CAAC;QAKvB,sBAAsB;QACtB,iBAAY,GAAG,kEAAY,CAAC;QAC5B,mBAAc,GAAG,oEAAc,CAAC;IACjB,CAAC;IAEhB,QAAQ;QACN,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;gBAChD,6DAA6D;gBAC7D,IAAI,CAAC,OAAO,CAAC,MAAM,CACjB,CAAC,EACD,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAC9B,CAAC;aACH;YACD,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,IAAI,CAAC;SACxC;IACH,CAAC;IAED,IAAI;QACF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QACxC,MAAM,MAAM,GAAG,IAAI,gFAAU,EAAE,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;QAC5D,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAS,EAAE,EAAE;YAClC,2BAA2B;YAC3B,0DAA0D;YAE1D,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YAC3C,sCAAsC;YACtC,IAAI,aAAa,GAAG,IAAI,iDAAoB,EAAE,CAAC;YAC/C,aAAa,GAAG,mHAAyC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAChE,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE;gBACjB,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACpB,aAAa,GAAG,mHAAyC,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC/E,+DAA+D;gBAC/D,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACnB,wBAAwB;gBACxB,aAAa,GAAG,mHAAyC,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC/E,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACpB,aAAa,GAAG,mHAAyC,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC;aAChF;YAED,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YAEvD;wEAC4D;YAE5D,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBAChB,MAAM,QAAQ,GAAG,aAAa,CAAC;gBAE/B,oBAAoB;gBACpB,IAAI,CAAC,cAAc,GAAG,IAAI,6DAAgC,CACxD,IAAI,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,EACpC,CAAC,EACD,CAAC,CACF,CAAC,QAAQ,CAAC,mDAAsB,CAAC,CAAC;gBACnC;;;;sDAIsC;gBACtC,IAAI,CAAC,OAAO,GAAG,IAAI,6DAAgC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC/E,sFAAsF;gBAEtF,MAAM,MAAM,GAAG,IAAI,6CAAgB,EAAE,CAAC;gBACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;oBAChD,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACxC,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACxC,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAExC,6DAA6D;oBAC7D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEhC,gDAAgD;iBACjD;gBAED,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,uBAAuB;gBAEtE,IAAI,CAAC,YAAY,GAAG,IAAI,6DAAgC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAEpF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;oBACzD,MAAM,CAAC,YAAY,CACjB,IAAI,wCAAW,CACb,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAC9B,CACF,CAAC;oBACF,sBAAsB;oBACtB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEhD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;oBACrE,yCAAyC;iBAC1C;gBAED,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,uBAAuB;gBAEhF,WAAW;gBACX,MAAM,OAAO,GAAG,cAAc,CAAC,GAAG,CAAC;gBACnC,IAAI,UAAU,CAAC;gBACf,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,EAAE;oBAClD,UAAU,GAAG,IAAI,gDAAmB,EAAE,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;iBACpF;gBAED,IAAI,OAAO,EAAE;oBACX,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;iBACpE;gBAED,MAAM,QAAQ,GAAG,IAAI,oDAAuB,CAAC;oBAC3C,QAAQ,EAAE;wBACR,GAAG,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE;wBACvB,UAAU;qBACX;oBACD,YAAY,EAAE,IAAI,CAAC,YAAY;oBAC/B,cAAc,EAAE,IAAI,CAAC,cAAc;oBACnC,IAAI,EAAE,4CAAe;oBACrB,WAAW,EAAE,KAAK;iBACnB,CAAC,CAAC;gBAEH,MAAM,IAAI,GAAG,IAAI,uCAAU,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAChD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;oBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAC1B,CAAC;iBACH;gBACD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;oBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAC1B,CAAC;iBACH;gBACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACtB;iBAAM;gBACL,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;gBAEnC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,EAAE;oBAClD,IAAI,KAAK,GAAG,IAAI,gDAAmB,EAAE,CAAC,IAAI,CACxC,mCAAmC,EACnC,CAAC,OAAO,EAAE,EAAE;wBACV,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;wBAC3B,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;oBACxB,CAAC,CACF,CAAC;oBACF,cAAc,CAAC,KAAK,GAAG,KAAK,CAAC;oBAC7B,cAAc,CAAC,cAAc,GAAG,CAAC,CAAC;iBACnC;gBAED,IAAI,IAAI,GAAG,IAAI,gDAAmB,CAAC,aAAa,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;gBAEzE,IAAI,KAAK,GAAG,IAAI,2CAAc,EAAE,CAAC;gBAEjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;oBAC9B,KAAK,CAAC,QAAQ,CAAC,GAAG,CAChB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAC9B,CAAC;oBAEF,KAAK,CAAC,QAAQ,CAAC,GAAG,CAChB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAC7B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAC9B,CAAC;oBAEF,KAAK,CAAC,YAAY,EAAE,CAAC;oBAErB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;iBACnC;aACF;YACD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;gBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAC1B,CAAC;aACH;YACD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;gBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EACzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAC1B,CAAC;aACH;YACD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAE9B,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW,CAAC,QAAQ;QAClB,yBAAyB;QACzB,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,YAAY;QAEZ,mEAAmE;QACnE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9C,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAElC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtD,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAC9B;QAED;;;;;YAKI;QAEJ,4BAA4B;QAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9C,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;SACf;QAED,sBAAsB;QAEtB,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3B,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1C,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAC5B;QAED,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC;QACnC,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAClC,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC;QAExC;2CACmC;QACnC,QAAQ,CAAC,qBAAqB,EAAE,CAAC;IACnC,CAAC;CACF;;;oBAlRE,gDAAK;uBACL,gDAAK;yBACL,gDAAK;kBAEL,gDAAK;qBACL,gDAAK;yBACL,gDAAK;wBACL,gDAAK;qBACL,gDAAK;;AATK,wBAAwB;IAPpC,wDAAS,CAAC;QACT,QAAQ,EAAE,sBAAsB;QAChC,0FAAgD;QAEhD,eAAe,EAAE,yEAA8B;;KAEhD,CAAC;GACW,wBAAwB,CAmRpC;AAnRoC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACf+C;AACrD;AACF;AACS;AAEsB;AAOI;AACN;AACuB;IASpE,cAAc,SAAd,cAAc;IAgBzB,YACS,aAA4B,EAC5B,UAAsB,EACtB,qBAA4C;QAF5C,kBAAa,GAAb,aAAa,CAAe;QAC5B,eAAU,GAAV,UAAU,CAAY;QACtB,0BAAqB,GAArB,qBAAqB,CAAuB;QAXrD,cAAS,GAAG,CAAC,CAAC;IAYX,CAAC;IAEJ,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;QACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QACjD,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,IAAI;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,wCAAW,EAAE,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,+CAAkB,EAAE,CAAC;QAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,sCAAS,EAAE,CAAC;QAE5B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAEtD,IAAI,CAAC,MAAM,GAAG,IAAI,oDAAuB,CAAC,EAAE,EAAE,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAChG;;0CAEkC;QAClC,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC;QACrC,oCAAoC;QAEpC,IAAI,CAAC,KAAK,GAAG,IAAI,wCAAW,EAAE,CAAC;QAE/B,IAAI,CAAC,QAAQ,GAAG,IAAI,gDAAmB,EAAE,CAAC;QAE1C;;;;;;;WAOG;QAEH,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtC;;;cAGM;QACJ,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QACrD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAErD,IAAI,CAAC,KAAK,GAAG,gFAAK,EAAE,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAE3C;;;;;;;yDAOiD;QAEjD,IAAI,CAAC,MAAM,GAAG,IAAI,8CAAM,EAAE,CAAC;QAC3B,MAAM,OAAO,GAAG,IAAI,+CAAkB,EAAE,CAAC;QACzC,OAAO,CAAC,IAAI,CAAC,6BAA6B,EAAE,EAAE,mBAAmB,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YAC1F,2BAA2B;YAE3B,4DAA4D;YAC5D,6BAA6B;YAE7B,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;YAC9B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAE5D,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEpC,qEAAqE;YAErE,6CAA6C;YAC7C,sEAAsE;YAEtE,aAAa;QACf,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,cAAc;QACZ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,gCAAgC;QAChC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC;QAC5D,IAAI,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC;QAErC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;IAC/D,CAAC;IAED,OAAO;QACL,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QACpB,0CAA0C;QAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC;QAC5C,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QAEjE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QACrE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAEhD,uCAAuC;QAEvC,4BAA4B;QAE5B,IAAI,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;QAC3B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC;IAED,IAAI,CAAC,MAAM,EAAE,eAAe;QAC1B,wDAAwD;IAC1D,CAAC;CACF;;YAzJQ,0EAAa;YACb,oEAAU;YACV,2FAAqB;;AASjB,cAAc;IAP1B,yDAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,+EAAqC;QAErC,eAAe,EAAE,0EAA8B;;KAEhD,CAAC;GACW,cAAc,CA8I1B;AA9I0B;;;;;;;;;;;;;;;;ACrBpB,IAAI,QAAQ,GAAiB;IAChC,OAAO,EAAE,KAAK;IACd,SAAS,EAAE,KAAK;IAChB,IAAI,EAAE,KAAK;IACX,KAAK,EAAE,KAAK;IACZ,WAAW,EAAE,KAAK;IAClB,MAAM,EAAE,CAAC;IACT,MAAM,EAAE,CAAC;CACZ,CAAC;;;;;;;;;;;;;;;;ACRK,IAAI,QAAQ,GAAa;IAC9B,EAAE,GAAG,EAAE,aAAa,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE;IAClF;QACE,GAAG,EAAE,wBAAwB;QAC7B,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;YACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;SACnD;QACD,UAAU,EAAE,EAAE;QACd,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,iCAAiC;QACtC,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;YACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;SACnD;QACD,UAAU,EAAE,EAAE;QACd,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,qBAAqB;QAC1B,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;YACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;SACnD;QACD,UAAU,EAAE,EAAE;QACd,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD,EAAE,GAAG,EAAE,cAAc,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACrF,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IAClF;QACE,GAAG,EAAE,kBAAkB;QACvB,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;YACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;SACnD;QACD,UAAU,EAAE,EAAE;QACd,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD,EAAE,GAAG,EAAE,aAAa,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACpF,EAAE,GAAG,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACjF,EAAE,GAAG,EAAE,gBAAgB,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACvF,EAAE,GAAG,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACnF,EAAE,GAAG,EAAE,mBAAmB,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IAC1F,EAAE,GAAG,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACjF,EAAE,GAAG,EAAE,gBAAgB,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACvF,EAAE,GAAG,EAAE,kBAAkB,EAAE,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;IACzF;QACE,GAAG,EAAE,oBAAoB;QACzB,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACnD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,0BAA0B;QAC/B,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACnD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,0BAA0B;QAC/B,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACnD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,WAAW;QAChB,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAG,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACpD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IAED;QACE,GAAG,EAAE,iBAAiB;QACtB,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;YACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAG,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;SACpD;QACD,UAAU,EAAE,EAAE;QACd,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,iBAAiB;QACtB,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAG,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACpD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,yBAAyB;QAC9B,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACnD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD;QACE,GAAG,EAAE,+BAA+B;QACpC,UAAU,EAAE;YACV;gBACE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;gBACpD,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;aACnD;SACF;QACD,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;KAC/B;IACD,wFAAwF;CACzF,CAAC;;;;;;;;;;;;;;;;;;;;;AC/IyC;AAEmB;AAC/B;IAKlB,qBAAqB,SAArB,qBAAqB;IAGhC,YAAmB,mBAAwC;QAAxC,wBAAmB,GAAnB,mBAAmB,CAAqB;QAF3D,cAAS,GAAG,IAAI,yCAAO,EAAE,CAAC;IAEqC,CAAC;IAGzD,YAAY,CAAC,MAAW,EAAE,SAAiB;QAChD,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,CAAC;QAEzD,sCAAsC;QAEtC,8BAA8B;QAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,CAAC,CAAC;QAEnB,IAAI,KAAK,CAAC,OAAO,KAAK,IAAI,EAAE;YAC1B,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;YAC7D,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;SAC9D;QACD,IAAI,KAAK,CAAC,SAAS,KAAK,IAAI,EAAE;YAC5B,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;YAC7D,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;SAC9D;QACD,IAAI,KAAK,CAAC,KAAK,KAAK,IAAI,EAAE;YACxB,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC;SACpD;QACD,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,EAAE;YACvB,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC;SACpD;QAED,IAAI,KAAK,CAAC,WAAW,KAAK,IAAI,EAAE;YAC9B,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;YAC7D,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;YAC7D,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC;SACpE;QAED;;;;;YAKI;IACN,CAAC;CACF;;YAlDQ,uEAAmB;;AAMf,qBAAqB;IAHjC,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,qBAAqB,CA4CjC;AA5CiC;;;;;;;;;;;;;;;;;;;;ACRS;AACC;IAK/B,mBAAmB,SAAnB,mBAAmB;IAE9B,gBAAgB,CAAC;IAGV,eAAe;QACpB,OAAO,oDAAQ,CAAC;IAClB,CAAC;CACF;;AARY,mBAAmB;IAH/B,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,mBAAmB,CAQ/B;AAR+B;;;;;;;;;;;;;;;;;;;;ACNW;AACC;IAK/B,aAAa,SAAb,aAAa;IACxB,gBAAe,CAAC;IAET,WAAW;QAChB,OAAO,oDAAQ,CAAC;IAClB,CAAC;IAEM,cAAc;QACnB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACpC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,QAAQ,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;gBACvB,KAAK,aAAa;oBAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC;wBACtB,MAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;wBACvB,MAAM,IAAI,GAAG,IAAI,GAAG,KAAK,CAAC;wBAC1B,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;4BAC5B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAEpC,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,KAAK,EAAE;6BACpD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,MAAM;gBAER,KAAK,kBAAkB;oBACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC;wBACtB,MAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;wBACvB,MAAM,IAAI,GAAG,OAAO,CAAC;wBACrB,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;4BAC5B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;gCAExC,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE;6BAC1D,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,MAAM;gBAER,KAAK,cAAc;oBACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC;wBACtB,MAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;wBACvB,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;wBACzB,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;4BAC5B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAEpC,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,KAAK,EAAE;6BACpD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,MAAM;gBAER,KAAK,WAAW;oBACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC;wBACtB,MAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;wBACvB,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;wBACzB,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;4BAC5B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAE9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,KAAK,EAAE;6BACpD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,MAAM;gBAER,KAAK,aAAa;oBAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,GAAG,CAAC;wBAClB,MAAM,IAAI,GAAG,CAAC,CAAC;wBACf,MAAM,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC;wBACvB,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;4BAC3B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAE9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,KAAK,GAAG,CAAC,EAAE;6BACpD,CAAC,CAAC;yBACJ;wBAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;4BAC3B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;gCAEpC,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,KAAK,GAAG,CAAC,EAAE;6BACpD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,MAAM;gBAER,KAAK,mBAAmB;oBACtB,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAEzC,QAAQ,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE;qBAC7C,CAAC,CAAC;oBAEH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAE9C,QAAQ,EAAE,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE;qBAC9C,CAAC,CAAC;oBAEH,6DAA6D;oBAE7D,MAAM;gBAER,KAAK,kBAAkB;oBACrB,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC;oBACtB,MAAM,IAAI,GAAG,OAAO,CAAC;oBACrB,MAAM,QAAQ,GAAG,OAAO,GAAG,OAAO,CAAC;oBACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,OAAO,GAAG,CAAC,CAAC;wBACxC,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;4BAC3B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAE9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,QAAQ,EAAE;6BACvD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;wBACpC,MAAM,IAAI,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,QAAQ,CAAC;wBACrC,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC;wBACtB,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;4BAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;4BAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE;yBACxC,CAAC,CAAC;qBACJ;oBACD,MAAM;gBAER,KAAK,wBAAwB;oBAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC;wBACtB,MAAM,IAAI,GAAG,OAAO,CAAC;wBACrB,MAAM,QAAQ,GAAG,OAAO,GAAG,OAAO,CAAC;wBACnC,MAAM,IAAI,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,OAAO,GAAG,CAAC,CAAC;wBACxC,wCAAwC;wBAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;4BAC3B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;gCAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;gCAE9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,QAAQ,EAAE;6BACvD,CAAC,CAAC;yBACJ;wBACD,6DAA6D;qBAC9D;oBACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC1B,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;wBACpC,MAAM,IAAI,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,QAAQ,CAAC;wBACrC,MAAM,IAAI,GAAG,OAAO,CAAC;wBACrB,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC;wBACtB,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;4BAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;4BAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE;yBACxC,CAAC,CAAC;qBACJ;oBACD,MAAM;gBAEN,KAAK,iBAAiB;oBACpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;wBAC3B,MAAM,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC;wBAC/B,MAAM,IAAI,GAAG,CAAC,CAAC;wBACf,MAAM,IAAI,GAAG,CAAC,CAAC;wBACf,MAAM,IAAI,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;wBAC3B,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;4BAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;4BAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE;yBACxC,CAAC,CAAC;qBACJ;oBACD,MAAM;gBAEV,KAAK,qBAAqB,CAAC;gBAC3B,KAAK,iCAAiC;oBACpC,MAAM,KAAK,GAAG,OAAO,CAAC;oBACtB,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC9C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC9C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC7C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC9C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC7C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;qBAC7C,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE;qBACvC,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE;qBACvC,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE;qBACtC,CAAC,CAAC;oBACH,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;wBAC9B,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE;qBACtC,CAAC,CAAC;oBACH,MAAM;gBAER;oBACE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;wBAClE,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;4BAC1B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;4BAE9B,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;yBAC/B,CAAC,CAAC;qBACJ;oBAED,6DAA6D;oBAE7D,MAAM;aACT;SACF;IACH,CAAC;CACF;;AAhQY,aAAa;IAHzB,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,aAAa,CAgQzB;AAhQyB;;;;;;;;;;;;;;;;;;;;;ACNiB;AACZ;AACsB;IAKxC,UAAU,SAAV,UAAU;IAErB,gBAAgB,CAAC;IACV,OAAO,CAAC,KAAK;QAClB,MAAM,KAAK,GAAG,IAAI,mDAAsB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QACxD,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACnC,MAAM,SAAS,GAAG,IAAI,kDAAqB,CAAC,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;QACrE,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAErB,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAEjB,MAAM,GAAG,GAAG,IAAI,+DAAG,EAAE,CAAC;QACtB,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC3B,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACf,MAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC;QACvC,QAAQ,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC;QAC9B,QAAQ,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;QAC5B,+BAA+B;QAC/B,QAAQ,CAAC,cAAc,CAAC,KAAK,GAAG,KAAK,CAAC;QACtC,QAAQ,CAAC,eAAe,CAAC,KAAK,GAAG,GAAG,CAAC;QACrC,MAAM,UAAU,GAAG;YACjB,QAAQ,EAAE,GAAG;YACb,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,GAAG;SACb,CAAC;QAEF,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC;QACvD,MAAM,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;QAErD,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACvD,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzE,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAC3D,KAAK,CAAC,QAAQ,CACf,CAAC;QACF,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAE5E,CAAC;CACF;;AAtCY,UAAU;IAHtB,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,UAAU,CAsCtB;AAtCsB;;;;;;;;;;;;;;;;;ACPhB,IAAI,YAAY,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA4BtB,CAAC;AAEE,IAAI,cAAc,GAAG;;;;;;;;;;IAUxB,CAAC;;;;;;;;;;;;;;;;ACxCL,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,sEAAsE;;;;;;;;;;;;;;;;;ACfvB;AAC4B;AAE9B;AACY;AAEzD,IAAI,6EAAsB,EAAE;IAC1B,6DAAc,EAAE,CAAC;CAClB;AAED,yFAAsB,EAAE,CAAC,eAAe,CAAC,sDAAS,CAAC;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;;;;;;;;;;;ACXpC,+DAAe,QAAQ,mBAAmB,gBAAgB,iBAAiB,GAAG,6CAA6C,mUAAmU,E;;;;;;;;;;;;ACA9b,+DAAe,8CAA8C,2HAA2H,E;;;;;;;;;;;;ACAxL,+DAAe,8CAA8C,uIAAuI,E;;;;;;;;;;;;ACApM,+DAAe,QAAQ,mBAAmB,gBAAgB,iBAAiB,8BAA8B,8BAA8B,8BAA8B,GAAG,OAAO,gBAAgB,GAAG,mBAAmB,eAAe,iBAAiB,2BAA2B,qBAAqB,kBAAkB,GAAG,gBAAgB,gBAAgB,iBAAiB,8BAA8B,8BAA8B,8BAA8B,GAAG,6CAA6C,m6BAAm6B,E;;;;;;;;;;;;ACAx5C,+DAAe,6BAA6B,E;;;;;;;;;;;;ACA5C,+DAAe,IAAI,E;;;;;;;;;;;;ACAnB,+DAAe,EAAE,E;;;;;;;;;;;;ACAjB,+DAAe,0DAA0D,gJAAgJ,WAAW,aAAa,KAAK,mBAAmB,yQAAyQ,E","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8255;\nmodule.exports = webpackEmptyAsyncContext;","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { MovingEntity, GameEntity, Vector3 } from 'yuka';\n\nconst startPosition = new Vector3();\nconst endPosition = new Vector3();\n\nclass Player extends MovingEntity {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.maxSpeed = 4;\n\t\tthis.height = 2;\n\n\t\tthis.head = new GameEntity();\n\t\tthis.add( this.head );\n\n\t\tthis.updateOrientation = false;\n\t\tthis.navMesh = null;\n\t\tthis.currentRegion = null;\n\n\t}\n\n\tupdate( delta ) {\n\n\t\tstartPosition.copy( this.position );\n\n\t\tsuper.update( delta );\n\n\t\tendPosition.copy( this.position );\n\n\t\t// ensure the entity stays inside its navmesh\n\n\t\tthis.currentRegion = this.navMesh.clampMovement(\n\t\t\tthis.currentRegion,\n\t\t\tstartPosition,\n\t\t\tendPosition,\n\t\t\tthis.position\n\t\t);\n\n\t\t// adjust height of player according to the ground\n\n\t\tconst distance = this.currentRegion.distanceToPoint( this.position );\n\n\t\tthis.position.y -= distance * 0.2; // smooth transition\n\n\t}\n\n}\n\n\nexport { Player };\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\n\r\nconst routes: Routes = [];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' })],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'pergamon';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { StageComponent } from './components/stage/stage.component';\r\nimport { InstancedObjectComponent } from './components/instanced-object/instanced-object.component';\nimport { ControlsComponent } from './components/controls/controls.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    StageComponent,\r\n    InstancedObjectComponent,\r\n    ControlsComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit, HostListener, ChangeDetectionStrategy } from '@angular/core';\nimport { ControlState } from 'src/app/models/control-state';\nimport { ControlStateService } from 'src/app/services/control-state.service';\n\n@Component({\n  selector: 'pgm-controls',\n  templateUrl: './controls.component.html',\n  styleUrls: ['./controls.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n\n})\nexport class ControlsComponent implements OnInit {\n  controlState: ControlState\n\n  @HostListener('document:mousedown', ['$event'])\n  onMouseDown(ev: MouseEvent) {\n    ev.preventDefault();\n    // this.controlState.forward = true;\n    this.controlState.mouseIsDown = true;\n    this.controlState.mouseX = (ev.clientX / window.innerWidth - .5) * 2;\n    this.controlState.mouseY = (ev.clientY / window.innerHeight - .5) * 2;\n    // console.log(this.controlState.mouseX);\n    // console.log(ev.clientX)\n  }\n\n  @HostListener('document:mousemove', ['$event'])\n  onMouseMove(ev: MouseEvent) {\n    ev.preventDefault();\n    this.controlState.mouseX = (ev.clientX / window.innerWidth - .5) * 2;\n    this.controlState.mouseY = (ev.clientY / window.innerHeight - .5) * 2;\n    // console.log(this.controlState.mouseX);\n  }\n\n  @HostListener('document:mouseup', ['$event'])\n  onMouseUp(ev: MouseEvent) {\n    ev.preventDefault();\n    this.controlState.mouseIsDown = false;\n  }\n\n  @HostListener('document:touchstart', ['$event'])\n  onPointerDown(ev: TouchEvent) {\n    // ev.preventDefault();\n    this.controlState.mouseIsDown = true;\n    this.controlState.mouseX = (ev.touches[0].clientX / window.innerWidth - .5) * 2;\n    this.controlState.mouseY = (ev.touches[0].clientY / window.innerHeight - .5) * 2;\n  }\n\n  @HostListener('document:touchmove', ['$event'])\n  onPointerMove(ev: TouchEvent) {\n    // ev.preventDefault();\n    // console.log(ev);\n    this.controlState.mouseX = (ev.touches[0].clientX / window.innerWidth - .5) * 2;\n    this.controlState.mouseY = (ev.touches[0].clientY / window.innerHeight - .5) * 2;\n    // console.log(this.controlState.mouseX);\n  }\n\n  @HostListener('document:touchend', ['$event'])\n  onTouchEnd(ev: TouchEvent) {\n    // ev.preventDefault();\n    this.controlState.mouseIsDown = false;\n  }\n\n  @HostListener('document:keydown', ['$event'])\n  onKeyDown(ev: KeyboardEvent) {\n    // console.log(`The user just pressed ${ev.key}!`);\n    switch (ev.keyCode) {\n      case 38: /*up*/\n      case 87: /*W*/\n        this.controlState.forward = true;\n        break;\n      case 40: /*down*/\n      case 83: /*S*/\n        this.controlState.backwards = true;\n        break;\n      case 37: /*left*/\n      case 65: /*A*/\n        this.controlState.left = true;\n        break;\n      case 39: /*right*/\n      case 68: /*D*/\n        this.controlState.right = true;\n        break;\n    }\n  }\n\n  @HostListener('document:keyup', ['$event'])\n  onKeyUp(ev: KeyboardEvent) {\n    // console.log(`The user just released ${ev.key}!`);\n    switch (ev.keyCode) {\n      case 38: /*up*/\n      case 87: /*W*/\n        this.controlState.forward = false;\n        break;\n      case 40: /*down*/\n      case 83: /*S*/\n        this.controlState.backwards = false;\n        break;\n      case 37: /*left*/\n      case 65: /*A*/\n        this.controlState.left = false;\n        break;\n      case 39: /*right*/\n      case 68: /*D*/\n        this.controlState.right = false;\n        break;\n    }\n  }\n\n\n  constructor(public controlStateService: ControlStateService) { }\n\n  ngOnInit(): void {\n    this.controlState = this.controlStateService.getControlState();\n  }\n\n}\n","import { Component, OnInit, Input, OnChanges, ChangeDetectionStrategy } from '@angular/core';\r\nimport * as THREE from 'three';\r\n\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { BufferGeometryUtils } from 'three/examples/jsm/utils/BufferGeometryUtils';\r\nimport { vertexShader, fragmentShader } from '../../shader/instanced-shader';\r\nimport { ObjectTransform } from 'src/app/models/object-transform';\r\n\r\n@Component({\r\n  selector: 'pgm-instanced-object',\r\n  templateUrl: './instanced-object.component.html',\r\n  styleUrls: ['./instanced-object.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n\r\n})\r\nexport class InstancedObjectComponent implements OnInit, OnChanges {\r\n  @Input() scene;\r\n  @Input() renderer;\r\n  @Input() changeStep;\r\n  instances;\r\n  @Input() src;\r\n  @Input() mirror;\r\n  @Input() transforms: ObjectTransform[];\r\n  @Input() transform: ObjectTransform;\r\n  @Input() lights = true;\r\n  orientations;\r\n  offsets;\r\n  // speeds;\r\n  instanceBuffer;\r\n  //instanceBufferSpeed;\r\n  vertexShader = vertexShader;\r\n  fragmentShader = fragmentShader;\r\n  constructor() {}\r\n\r\n  ngOnInit() {\r\n    this.init();\r\n  }\r\n\r\n  ngOnChanges() {\r\n    if (this.instanceBuffer) {\r\n      for (let i = 0, ul = this.instances; i < ul; i++) {\r\n        // move out at least 5 units from center in current direction\r\n        this.offsets.setXYZ(\r\n          i,\r\n          this.transforms[i].position.x,\r\n          this.transforms[i].position.y,\r\n          this.transforms[i].position.z,\r\n        );\r\n      }\r\n      this.instanceBuffer.needsUpdate = true;\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.instances = this.transforms.length;\r\n    const loader = new GLTFLoader().setPath('./assets/models/');\r\n    loader.load(this.src, (gltf: any) => {\r\n      // console.log(gltf.scene);\r\n      // const loadedGeometry = gltf.scene.children[0].geometry;\r\n\r\n      const g1 = gltf.scene.children[0].geometry;\r\n      // const matrix = new THREE.Matrix4();\r\n      let mergeGeometry = new THREE.BufferGeometry();\r\n      mergeGeometry = BufferGeometryUtils.mergeBufferGeometries([g1]);\r\n      if (this.mirror.x) {\r\n        g1.rotateY(Math.PI);\r\n        mergeGeometry = BufferGeometryUtils.mergeBufferGeometries([mergeGeometry, g1]);\r\n        // matrix.set(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n        g1.scale(-1, 1, 1);\r\n        // this.flipNormals(g1);\r\n        mergeGeometry = BufferGeometryUtils.mergeBufferGeometries([mergeGeometry, g1]);\r\n        g1.rotateY(Math.PI);\r\n        mergeGeometry = BufferGeometryUtils.mergeBufferGeometries([mergeGeometry, g1]);\r\n      }\r\n\r\n      const loadedMaterial = gltf.scene.children[0].material;\r\n\r\n      /* const loadedMaterial = new THREE.MeshBasicMaterial();\r\n      loadedMaterial.map = gltf.scene.children[0].material.map; */\r\n\r\n      if (!this.lights) {\r\n        const geometry = mergeGeometry;\r\n\r\n        // per instance data\r\n        this.instanceBuffer = new THREE.InstancedInterleavedBuffer(\r\n          new Float32Array(this.instances * 8),\r\n          8,\r\n          1,\r\n        ).setUsage(THREE.DynamicDrawUsage);\r\n        /* this.instanceBufferSpeed = new THREE.InstancedInterleavedBuffer(\r\n          new Float32Array(this.instances * 8),\r\n          8,\r\n          1,\r\n        ).setUsage(THREE.DynamicDrawUsage); */\r\n        this.offsets = new THREE.InterleavedBufferAttribute(this.instanceBuffer, 3, 0);\r\n        // this.speeds = new THREE.InterleavedBufferAttribute(this.instanceBufferSpeed, 3, 0);\r\n\r\n        const vector = new THREE.Quaternion();\r\n        for (let i = 0, ul = this.instances; i < ul; i++) {\r\n          const x = this.transforms[i].position.x;\r\n          const y = this.transforms[i].position.y;\r\n          const z = this.transforms[i].position.z;\r\n\r\n          // move out at least 5 units from center in current direction\r\n          this.offsets.setXYZ(i, x, y, z);\r\n\r\n          // this.speeds.setXYZ(i, x * 0.01, 0, z * 0.01);\r\n        }\r\n\r\n        geometry.setAttribute('offset', this.offsets); // per mesh translation\r\n\r\n        this.orientations = new THREE.InterleavedBufferAttribute(this.instanceBuffer, 4, 4);\r\n\r\n        for (let i = 0, ul = this.orientations.count; i < ul; i++) {\r\n          vector.setFromEuler(\r\n            new THREE.Euler(\r\n              this.transforms[i].rotation.x,\r\n              this.transforms[i].rotation.y,\r\n              this.transforms[i].rotation.z,\r\n            ),\r\n          );\r\n          // vector.normalize();\r\n          this.orientations.setXYZW(i, 0, vector.y, 0, 1);\r\n\r\n          this.orientations.setXYZW(i, vector.x, vector.y, vector.z, vector.w);\r\n          // this.orientations.setY( i, vector.y );\r\n        }\r\n\r\n        geometry.setAttribute('orientation', this.orientations); // per mesh orientation\r\n\r\n        // material\r\n        const texture = loadedMaterial.map;\r\n        let ambientMap;\r\n        if (gltf.scene.children[0].geometry.attributes.uv2) {\r\n          ambientMap = new THREE.TextureLoader().load('./assets/textures/stoa-floor-ao.jpg');\r\n        }\r\n\r\n        if (texture) {\r\n          texture.anisotropy = this.renderer.capabilities.getMaxAnisotropy();\r\n        }\r\n\r\n        const material = new THREE.RawShaderMaterial({\r\n          uniforms: {\r\n            map: { value: texture },\r\n            ambientMap,\r\n          },\r\n          vertexShader: this.vertexShader,\r\n          fragmentShader: this.fragmentShader,\r\n          side: THREE.FrontSide,\r\n          transparent: false,\r\n        });\r\n\r\n        const mesh = new THREE.Mesh(geometry, material);\r\n        if (this.transform && this.transform.rotation) {\r\n          mesh.rotation.set(\r\n            this.transform.rotation.x,\r\n            this.transform.rotation.y,\r\n            this.transform.rotation.z,\r\n          );\r\n        }\r\n        if (this.transform && this.transform.position) {\r\n          mesh.position.set(\r\n            this.transform.position.x,\r\n            this.transform.position.y,\r\n            this.transform.position.z,\r\n          );\r\n        }\r\n        mesh.frustumCulled = false;\r\n        mesh.matrixAutoUpdate = false;\r\n        mesh.updateMatrix();\r\n        this.scene.add(mesh);\r\n      } else {\r\n        var count = this.transforms.length;\r\n\r\n        if (gltf.scene.children[0].geometry.attributes.uv2) {\r\n          let aoMap = new THREE.TextureLoader().load(\r\n            'assets/textures/stoa-floor-ao.png',\r\n            (texture) => {\r\n              texture.needsUpdate = true;\r\n              texture.flipY = false;\r\n            },\r\n          );\r\n          loadedMaterial.aoMap = aoMap;\r\n          loadedMaterial.aoMapIntensity = 2;\r\n        }\r\n\r\n        var mesh = new THREE.InstancedMesh(mergeGeometry, loadedMaterial, count);\r\n\r\n        var dummy = new THREE.Object3D();\r\n\r\n        for (var i = 0; i < count; i++) {\r\n          dummy.position.set(\r\n            this.transforms[i].position.x,\r\n            this.transforms[i].position.y,\r\n            this.transforms[i].position.z,\r\n          );\r\n\r\n          dummy.rotation.set(\r\n            this.transforms[i].rotation.x,\r\n            this.transforms[i].rotation.y,\r\n            this.transforms[i].rotation.z,\r\n          );\r\n\r\n          dummy.updateMatrix();\r\n\r\n          mesh.setMatrixAt(i, dummy.matrix);\r\n        }\r\n      }\r\n      if (this.transform && this.transform.rotation) {\r\n        mesh.rotation.set(\r\n          this.transform.rotation.x,\r\n          this.transform.rotation.y,\r\n          this.transform.rotation.z,\r\n        );\r\n      }\r\n      if (this.transform && this.transform.position) {\r\n        mesh.position.set(\r\n          this.transform.position.x,\r\n          this.transform.position.y,\r\n          this.transform.position.z,\r\n        );\r\n      }\r\n      mesh.matrixAutoUpdate = false;\r\n\r\n      mesh.updateMatrix();\r\n      this.scene.add(mesh);\r\n    });\r\n  }\r\n\r\n  flipNormals(geometry) {\r\n    // console.log(geometry);\r\n    let temp = 0;\r\n    // let face;\r\n\r\n    // flip every vertex normal in geometry by multiplying normal by -1\r\n    for (let i = 0; i < geometry.faces.length; i++) {\r\n      const face = geometry.faces[i];\r\n      face.normal.x = -1 * face.normal.x;\r\n      face.normal.y = 1 * face.normal.y;\r\n      face.normal.z = 1 * face.normal.z;\r\n\r\n      face.vertexNormals[0].x = -1 * face.vertexNormals[0].x;\r\n      face.vertexNormals[0].y = 1 * face.vertexNormals[0].y;\r\n      face.vertexNormals[0].z = 1 * face.vertexNormals[0].z;\r\n\r\n      face.vertexNormals[1].x = -1 * face.vertexNormals[1].x;\r\n      face.vertexNormals[1].y = 1 * face.vertexNormals[1].y;\r\n      face.vertexNormals[1].z = 1 * face.vertexNormals[1].z;\r\n\r\n      face.vertexNormals[2].x = -1 * face.vertexNormals[2].x;\r\n      face.vertexNormals[2].y = 1 * face.vertexNormals[2].y;\r\n      face.vertexNormals[2].z = 1 * face.vertexNormals[2].z;\r\n\r\n      temp = face.vertexNormals[0];\r\n      face.vertexNormals[0] = face.vertexNormals[2];\r\n      face.vertexNormals[2] = temp;\r\n    }\r\n\r\n    /*     for (let i = 0; i < geometry.vertices.length; i++) {\r\n      const vertex = geometry.vertices[i];\r\n      vertex.normal.x = -1 * vertex.normal.x;\r\n      vertex.normal.y = -1 * vertex.normal.y;\r\n      vertex.normal.z = -1 * vertex.normal.z;\r\n    } */\r\n\r\n    // change face winding order\r\n    for (let i = 0; i < geometry.faces.length; i++) {\r\n      const face = geometry.faces[i];\r\n      temp = face.a;\r\n      face.a = face.c;\r\n      face.c = temp;\r\n    }\r\n\r\n    // flip UV coordinates\r\n\r\n    const faceVertexUvs = geometry.faceVertexUvs[0];\r\n    for (let i = 0; i < faceVertexUvs.length; i++) {\r\n      temp = faceVertexUvs[i][0];\r\n      faceVertexUvs[i][0] = faceVertexUvs[i][2];\r\n      faceVertexUvs[i][2] = temp;\r\n    }\r\n\r\n    geometry.verticesNeedUpdate = true;\r\n    geometry.normalsNeedUpdate = true;\r\n    geometry.vertexNormalsNeedUpdate = true;\r\n\r\n    /* geometry.computeFaceNormals();\r\n    geometry.computeVertexNormals(); */\r\n    geometry.computeBoundingSphere();\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, OnInit, ɵPlayer } from '@angular/core';\r\nimport * as THREE from 'three';\r\nimport * as YUKA from 'yuka';\r\nimport { Player } from '../Player.js';\r\n\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\r\n\r\n// import { FirstPersonControls } from 'three/examples/jsm/controls/FirstPersonControls';\r\n// import { MapControls } from 'three/examples/jsm/controls/OrbitControls';\r\n// import { CannonPhysics } from 'three/examples/jsm/physics/CannonPhysics.js';\r\n\r\nimport { Entity } from 'src/app/models/entity';\r\nimport { EntityService } from 'src/app/services/entity.service';\r\nimport { SkyService } from 'src/app/services/sky.service';\r\nimport { CameraPositionService } from 'src/app/services/camera-position.service';\r\n\r\n@Component({\r\n  selector: 'pgm-stage',\r\n  templateUrl: './stage.component.html',\r\n  styleUrls: ['./stage.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n\r\n})\r\nexport class StageComponent implements OnInit {\r\n  container;\r\n  stats: Stats;\r\n\r\n  camera: THREE.PerspectiveCamera;\r\n  scene: THREE.Scene;\r\n  renderer: THREE.WebGLRenderer;\r\n  entities: Entity[];\r\n  deltaTime = 1;\r\n  entityManager: YUKA.EntityManager;\r\n  time: YUKA.time;\r\n  player: Player;\r\n\r\n  // controls;\r\n  clock: THREE.Clock;\r\n\r\n  constructor(\r\n    public entityService: EntityService,\r\n    public skyService: SkyService,\r\n    public cameraPositionService: CameraPositionService,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.entityService.createEntities();\r\n    this.entities = this.entityService.getEntities();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.clock = new THREE.Clock();\r\n    this.entityManager = new YUKA.EntityManager();\r\n    this.time = new YUKA.Time();\r\n\r\n    this.container = document.getElementById('container');\r\n\r\n    this.camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.3, 500);\r\n    /*    this.camera.position.x = 5;\r\n       this.camera.position.y = 1.6;\r\n       this.camera.position.z = -5; */\r\n    this.camera.matrixAutoUpdate = false;\r\n    // this.camera.rotation.y = Math.PI;\r\n\r\n    this.scene = new THREE.Scene();\r\n\r\n    this.renderer = new THREE.WebGLRenderer();\r\n\r\n    /*  this.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\r\n        this.controls.dampingFactor = 0.05;\r\n        this.controls.screenSpacePanning = false;\r\n        this.controls.minDistance = 5;\r\n        this.controls.maxDistance = 200;\r\n        this.controls.maxPolarAngle = Math.PI / 2.015;\r\n        this.controls.target.set(0, 0, 60);\r\n     */\r\n    \r\n    this.skyService.makeSky(this.scene);\r\n\r\n  /*   if (this.renderer.extensions.get('ANGLE_instanced_arrays') === null) {\r\n      //document.getElementById('notSupported').style.display = '';\r\n      return;\r\n    } */\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    this.container.appendChild(this.renderer.domElement);\r\n    \r\n    this.stats = Stats();\r\n    this.container.appendChild(this.stats.dom);\r\n\r\n    /*     this.controls = new FirstPersonControls(this.camera, this.renderer.domElement);\r\n        this.controls.movementSpeed = 10;\r\n        this.controls.lookSpeed = 0.1;\r\n        this.controls.lookAt(0, 0, 0);\r\n    \r\n        this.controls.constrainVertical = true;\r\n        this.controls.verticalMax = Math.PI * .55;\r\n        this.controls.verticalMin = Math.PI * .35; */\r\n\r\n    this.player = new Player();\r\n    const loader2 = new YUKA.NavMeshLoader();\r\n    loader2.load('./assets/models/navmesh.glb', { epsilonCoplanarTest: 0.25 }).then((navMesh) => {\r\n      // visualize convex regions\r\n\r\n      // const navMeshGroup = createConvexRegionHelper( navMesh );\r\n      // scene.add( navMeshGroup );\r\n\r\n      this.player.navMesh = navMesh;\r\n      this.player.head.setRenderComponent(this.camera, this.sync);\r\n\r\n      this.player.position.set(5, 0, -5);\r\n      this.entityManager.add(this.player);\r\n\r\n      // const loadingScreen = document.getElementById( 'loading-screen' );\r\n\r\n      // loadingScreen.classList.add( 'fade-out' );\r\n      // loadingScreen.addEventListener( 'transitionend', onTransitionEnd );\r\n\r\n      // animate();\r\n    });\r\n    \r\n    this.animate();\r\n  }\r\n\r\n  onWindowResize() {\r\n    console.log('resize');\r\n    // this.controls.handleResize();\r\n    this.camera.aspect = window.innerWidth / window.innerHeight;\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n  }\r\n\r\n  animate() {\r\n    requestAnimationFrame(this.animate.bind(this));\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.stats.update();\r\n    // this.deltaTime = this.clock.getDelta();\r\n    const delta = this.time.update().getDelta();\r\n    this.cameraPositionService.updateCamera(this.player, delta * 30);\r\n\r\n    this.entityManager.update(delta);\r\n    this.camera.position.x = this.player.position.x;\r\n    this.camera.position.y = this.player.position.y + this.player.height;\r\n    this.camera.position.z = this.player.position.z;\r\n    this.camera.rotation.x = this.player.rotation.x;\r\n    this.camera.rotation.y = this.player.rotation.y;\r\n    this.camera.rotation.z = this.player.rotation.z;\r\n\r\n    // console.log(this.player.position.x);\r\n\r\n    // controls.update( delta );\r\n\r\n    this.camera.updateProjectionMatrix();\r\n    this.camera.updateMatrix();\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n\r\n  sync(entity, renderComponent) {\r\n    // renderComponent.matrixWorld.copy(entity.worldMatrix);\r\n  }\r\n}\r\n","import { ControlState } from '../models/control-state';\r\n\r\nexport let CONTROLS: ControlState = {\r\n    forward: false,\r\n    backwards: false,\r\n    left: false,\r\n    right: false,\r\n    mouseIsDown: false,\r\n    mouseX: 0,\r\n    mouseY: 0\r\n};","import { Entity } from '../models/entity';\r\n\r\nexport let ENTITIES: Entity[] = [\r\n  { src: 'capitol.glb', transforms: [], static: true, mirror: { x: true, y: true } },\r\n  {\r\n    src: 'corinthian-capital.glb',\r\n    transform: {\r\n      rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n      position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n    },\r\n    transforms: [],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'corinthian-capital-propylon.glb',\r\n    transform: {\r\n      rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n      position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n    },\r\n    transforms: [],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'column-propylon.glb',\r\n    transform: {\r\n      rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n      position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n    },\r\n    transforms: [],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  { src: 'pedistal.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'shaft.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  {\r\n    src: 'column-court.glb',\r\n    transform: {\r\n      rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n      position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n    },\r\n    transforms: [],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  { src: 'chamber.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'road.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'stoa-floor.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'stairs.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'portal-pillar.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'roof.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'architrave.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  { src: 'hall-ceiling.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n  {\r\n    src: 'propylon-walls.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'propylon-court-walls.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'propylon-court-floor.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'court.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -43.7836 , z: 38.2562, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n\r\n  {\r\n    src: 'column-stoa.glb',\r\n    transform: {\r\n      rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n      position: { x: -43.7836 , z: 38.2562, y: -5.02641 },\r\n    },\r\n    transforms: [],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'court-walls.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -43.7836 , z: 38.2562, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'propylon-architrave.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  {\r\n    src: 'propylon-court-architrave.glb',\r\n    transforms: [\r\n      {\r\n        rotation: { x: 0, y: (Math.PI / 180) * -40.5, z: 0 },\r\n        position: { x: -18.7705, z: 52.6765, y: -5.02641 },\r\n      },\r\n    ],\r\n    static: true,\r\n    mirror: { x: false, y: false },\r\n  },\r\n  // { src: 'navmesh.glb', transforms: [], static: true, mirror: { x: false, y: false } },\r\n];\r\n","import { Injectable } from '@angular/core';\nimport * as THREE from 'three';\nimport { ControlStateService } from './control-state.service';\nimport { Vector3 } from 'yuka';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CameraPositionService {\n  direction = new Vector3();\n\n  constructor(public controlStateService: ControlStateService) { }\n\n\n  public updateCamera(player: any, deltaTime: number) {\n    const state = this.controlStateService.getControlState();\n\n    //player.getDirection(this.direction);\n\n    //console.log(this.direction);\n    this.direction.x = Math.sin(player.rotation.y);\n    this.direction.z = Math.cos(player.rotation.y);\n    const slowdown = 5;\n\n    if (state.forward === true) {\n      player.position.z -= this.direction.z / slowdown * deltaTime;\n      player.position.x -= this.direction.x / slowdown * deltaTime;\n    }\n    if (state.backwards === true) {\n      player.position.z += this.direction.z / slowdown * deltaTime;\n      player.position.x += this.direction.x / slowdown * deltaTime;\n    }\n    if (state.right === true) {\n      player.rotation.y -= 6 * Math.PI / 360 * deltaTime;\n    }\n    if (state.left === true) {\n      player.rotation.y += 6 * Math.PI / 360 * deltaTime;\n    }\n\n    if (state.mouseIsDown === true) {\n      player.position.z -= this.direction.z / slowdown * deltaTime;\n      player.position.x -= this.direction.x / slowdown * deltaTime;\n      player.rotation.y += -state.mouseX * 3 * Math.PI / 360 * deltaTime;\n    }\n\n    /* if (player.position.x < 2) {\n      player.position.x = 2;\n    }\n    if (player.position.x > 8) {\n      player.position.x = 8;\n    } */\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CONTROLS } from '../data/controls';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ControlStateService {\n\n  constructor() { }\n\n\n  public getControlState() {\n    return CONTROLS;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ENTITIES } from '../data/entities';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class EntityService {\n  constructor() {}\n\n  public getEntities() {\n    return ENTITIES;\n  }\n\n  public createEntities() {\n    const entities = this.getEntities();\n    for (let n = 0; n < entities.length; n++) {\n      switch (entities[n].src) {\n        case 'capitol.glb':\n          for (let i = 0; i < 2; i++) {\n            const posX = i * 9.65;\n            const posZ = 2.645 * 4;\n            const posY = 4.35 + 0.225;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 100; k++) {\n              entities[n].transforms.push({\n                rotation: { x: Math.PI, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * 2.645 },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          break;\n\n        case 'hall-ceiling.glb':\n          for (let i = 0; i < 2; i++) {\n            const posX = i * 9.65;\n            const posZ = 2.645 * 4;\n            const posY = 5.00371;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 100; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: i * Math.PI, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * (2.645 / 2) },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          break;\n\n        case 'pedistal.glb':\n          for (let i = 0; i < 2; i++) {\n            const posX = i * 9.65;\n            const posZ = 2.645 * 4;\n            const posY = 0.5 + 0.225;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 100; k++) {\n              entities[n].transforms.push({\n                rotation: { x: Math.PI, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * 2.645 },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          break;\n\n        case 'shaft.glb':\n          for (let i = 0; i < 2; i++) {\n            const posX = i * 9.65;\n            const posZ = 2.645 * 4;\n            const posY = 0.5 + 0.225;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 100; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * 2.645 },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          break;\n\n        case 'chamber.glb':\n          for (let i = 0; i < 1; i++) {\n            const posX = -5.2;\n            const posZ = 0;\n            const posY = 0 + 0.225;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 20; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - 4.454 * k },\n              });\n            }\n\n            for (let k = 0; k < 18; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: Math.PI, z: 0 },\n\n                position: { x: 15.2, y: posY, z: posZ - 4.454 * k },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          break;\n\n        case 'portal-pillar.glb':\n          entities[n].transforms.push({\n            rotation: { x: 0, y: -Math.PI / 4, z: 0 },\n\n            position: { x: 2.582, y: -2.25, z: 15.6291 },\n          });\n\n          entities[n].transforms.push({\n            rotation: { x: 0, y: (Math.PI / 4) * 3, z: 0 },\n\n            position: { x: 5.6107, y: -2.25, z: 18.3544 },\n          });\n\n          // move out at least 5 units from center in current direction\n\n          break;\n\n        case 'column-court.glb':\n          const posZ = -36.6416;\n          const posY = 2.70996;\n          const distance = 34.0016 - 36.6416;\n          for (let i = 0; i < 2; i++) {\n            const posX = -11.4742 + i * 11.4742 * 2;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 11; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * distance },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          for (let k = 1; k < 9; k++) {\n            const distance = -11.4758 + 8.92584;\n            const posX = -11.4742 - k * distance;\n            const posZ = -36.6416;\n            entities[n].transforms.push({\n              rotation: { x: 0, y: 0, z: 0 },\n              position: { x: posX, y: posY, z: posZ },\n            });\n          }\n          break;\n\n        case 'corinthian-capital.glb':\n          for (let i = 0; i < 2; i++) {\n            const posZ = -36.6416;\n            const posY = 2.70996;\n            const distance = 34.0016 - 36.6416;\n            const posX = -11.4742 + i * 11.4742 * 2;\n            // const rotY = Math.random() * Math.PI;\n\n            for (let k = 0; k < 11; k++) {\n              entities[n].transforms.push({\n                rotation: { x: 0, y: 0, z: 0 },\n\n                position: { x: posX, y: posY, z: posZ - k * distance },\n              });\n            }\n            // move out at least 5 units from center in current direction\n          }\n          for (let k = 1; k < 9; k++) {\n            const distance = -11.4758 + 8.92584;\n            const posX = -11.4742 - k * distance;\n            const posY = 2.70996;\n            const posZ = -36.6416;\n            entities[n].transforms.push({\n              rotation: { x: 0, y: 0, z: 0 },\n              position: { x: posX, y: posY, z: posZ },\n            });\n          }\n          break;\n\n          case 'column-stoa.glb':\n            for (let k = 0; k < 43; k++) {\n              const distance = 2.656 - 5.312;\n              const posX = 0;\n              const posY = 0;\n              const posZ = -k * distance;\n              entities[n].transforms.push({\n                rotation: { x: 0, y: 0, z: 0 },\n                position: { x: posX, y: posY, z: posZ },\n              });\n            }\n            break;\n\n        case 'column-propylon.glb':\n        case 'corinthian-capital-propylon.glb':\n          const posY2 = 2.94571;\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: -5.25, y: posY2, z: -13.5824 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: -1.75, y: posY2, z: -13.5824 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: 1.75, y: posY2, z: -13.5824 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: -1.75, y: posY2, z: -9.86405 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: 1.75, y: posY2, z: -9.86405 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: 5.25, y: posY2, z: -13.5824 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: -5.25, y: posY2, z: 0 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: -1.75, y: posY2, z: 0 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: 1.75, y: posY2, z: 0 },\n          });\n          entities[n].transforms.push({\n            rotation: { x: 0, y: 0, z: 0 },\n            position: { x: 5.25, y: posY2, z: 0 },\n          });\n          break;\n\n        default:\n          if (!entities[n].transforms || entities[n].transforms.length === 0) {\n            entities[n].transforms.push({\n              rotation: { x: 0, y: 0, z: 0 },\n\n              position: { x: 0, y: 0, z: 0 },\n            });\n          }\n\n          // move out at least 5 units from center in current direction\n\n          break;\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport * as THREE from 'three';\r\nimport { Sky } from 'three/examples/jsm/objects/Sky';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SkyService {\r\n\r\n  constructor() { }\r\n  public makeSky(scene) {\r\n    const light = new THREE.DirectionalLight(0xffffff, 0.8);\r\n    light.target.position.set(0, 0, 0);\r\n    const hemilight = new THREE.HemisphereLight(0xffffbb, 0x645f55, 0.8);\r\n    scene.add(hemilight);\r\n\r\n    scene.add(light);\r\n\r\n    const sky = new Sky();\r\n    sky.scale.setScalar(10000);\r\n    scene.add(sky);\r\n    const uniforms = sky.material.uniforms;\r\n    uniforms.turbidity.value = 10;\r\n    uniforms.rayleigh.value = 2;\r\n    //uniforms.luminance.value = 1;\r\n    uniforms.mieCoefficient.value = 0.005;\r\n    uniforms.mieDirectionalG.value = 0.8;\r\n    const parameters = {\r\n      distance: 400,\r\n      inclination: 0.15,\r\n      azimuth: 0.3\r\n    };\r\n\r\n    const theta = Math.PI * (parameters.inclination - 0.5);\r\n    const phi = 2 * Math.PI * (parameters.azimuth - 0.5);\r\n\r\n    light.position.x = parameters.distance * Math.cos(phi);\r\n    light.position.y = parameters.distance * Math.sin(phi) * Math.sin(theta);\r\n    light.position.z = parameters.distance * Math.sin(phi) * Math.cos(theta);\r\n    sky.material.uniforms.sunPosition.value = light.position.copy(\r\n      light.position\r\n    );\r\n    light.position.z = -parameters.distance * Math.sin(phi) * Math.cos(theta);\r\n\r\n  }\r\n}\r\n","export let vertexShader = `precision highp float;\r\n\r\n  uniform mat4 modelViewMatrix;\r\n  uniform mat4 projectionMatrix;\r\n\r\n  attribute vec3 position;\r\n  attribute vec3 offset;\r\n  attribute vec2 uv;\r\n  attribute vec4 orientation;\r\n\r\n  varying vec2 vUv;\r\n\r\n  // http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\r\n\r\n  vec3 applyQuaternionToVector( vec4 q, vec3 v ){\r\n\r\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\r\n\r\n  }\r\n\r\n  void main() {\r\n\r\n    vec3 vPosition = applyQuaternionToVector( orientation, position );\r\n\r\n    vUv = uv;\r\n\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( offset + vPosition, 1.0 );\r\n\r\n  }`;\r\n\r\nexport let fragmentShader = `precision highp float;\r\n\r\n  uniform sampler2D map;\r\n\r\n  varying vec2 vUv;\r\n\r\n  void main() {\r\n\r\n    gl_FragColor = texture2D(map, vUv);\r\n\r\n  }`;\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","export default \":host {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGNBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQUNKIiwiZmlsZSI6ImFwcC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgd2lkdGg6MTAwJTtcclxuICAgIGhlaWdodDoxMDAlO1xyXG59Il19 */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb250cm9scy5jb21wb25lbnQuc2NzcyJ9 */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpbnN0YW5jZWQtb2JqZWN0LmNvbXBvbmVudC5zY3NzIn0= */\";","export default \":host {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n}\\n\\na {\\n  color: #08f;\\n}\\n\\n#notSupported {\\n  width: 50%;\\n  margin: auto;\\n  background-color: #f00;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.container {\\n  width: 100%;\\n  height: 100%;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7S0FBQSxzQkFBQTtVQUFBLGlCQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxXQUFBO0FBRUY7O0FBQUE7RUFDRSxVQUFBO0VBQ0EsWUFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0FBR0Y7O0FBQUE7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7VUFBQSxpQkFBQTtBQUdGIiwiZmlsZSI6InN0YWdlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHdpZHRoOjEwMCU7XHJcbiAgaGVpZ2h0OjEwMCU7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuYSB7XHJcbiAgY29sb3I6ICMwOGY7XHJcbn1cclxuI25vdFN1cHBvcnRlZCB7XHJcbiAgd2lkdGg6IDUwJTtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YwMDtcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbn1cclxuXHJcbi5jb250YWluZXIge1xyXG4gIHdpZHRoOjEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG59XHJcbiJdfQ== */\";","export default \"<pgm-stage></pgm-stage>\\r\\n\";","export default \"\\n\";","export default \"\";","export default \"<div id=\\\"container\\\" (window:resize)=\\\"onWindowResize();\\\" draggable=\\\"false\\\"></div>\\r\\n<pgm-controls draggable=\\\"false\\\"></pgm-controls>\\r\\n<!-- <div  draggable=\\\"false\\\" style=\\\"position: absolute; top: 20px; right: 20px;\\\">{{camera.position.x}}</div> -->\\r\\n\\r\\n<pgm-instanced-object *ngFor=\\\"let entity of entities\\\" [scene]=\\\"scene\\\" [renderer]=\\\"renderer\\\" [src]=\\\"entity.src\\\" [transform]=\\\"entity.transform\\\"\\r\\n  [transforms]=\\\"entity.transforms\\\" [mirror]=\\\"entity.mirror\\\">\\r\\n</pgm-instanced-object>\";"],"sourceRoot":"webpack:///"}